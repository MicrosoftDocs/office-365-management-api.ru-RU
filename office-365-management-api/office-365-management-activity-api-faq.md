---
ms.TocTitle: Office 365 Management Activity API frequently asked questions
title: 'Вопросы и ответы: API действий управления Office 365'
description: 'Вопросы и ответы: использование API действий управления Office 365'
ms.ContentId: ''
ms.topic: reference (API)
ms.date: ''
localization_priority: Priority
ms.openlocfilehash: 9083127d1fd3ecf82e5fe778ba1727d22d91017c
ms.sourcegitcommit: 784b581a699c6d0ab7939ea621d5ecbea71925ea
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/29/2019
ms.locfileid: "35924779"
---
# <a name="office-365-management-activity-api-frequently-asked-questions"></a><span data-ttu-id="4cdae-103">Вопросы и ответы: API действий управления Office 365</span><span class="sxs-lookup"><span data-stu-id="4cdae-103">Office 365 Management Activity API frequently asked questions</span></span>

#### <a name="what-events-are-audited-for-a-specific-office-365-service"></a><span data-ttu-id="4cdae-104">В случае каких событий проводится аудит для определенной службы Office 365?</span><span class="sxs-lookup"><span data-stu-id="4cdae-104">What events are audited for a specific Office 365 service?</span></span>

<span data-ttu-id="4cdae-105">В документации по схеме API действий управления Office 365 приведен полный список событий.</span><span class="sxs-lookup"><span data-stu-id="4cdae-105">Office 365 Management Activity API schema documentation has a comprehensive list of events.</span></span> <span data-ttu-id="4cdae-106">Дополнительные сведения см. в статье [Схема API действий управления Office 365](office-365-management-activity-api-schema.md).</span><span class="sxs-lookup"><span data-stu-id="4cdae-106">For details, see [Office 365 Management Activity API schema](office-365-management-activity-api-schema.md).</span></span> <span data-ttu-id="4cdae-107">Кроме того, в статье[Поиск по журналу аудита в Центре безопасности и соответствия требованиям](https://docs.microsoft.com/ru-RU/office365/securitycompliance/search-the-audit-log-in-security-and-compliance#audited-activities) в разделе "Подлежащие аудиту действия" приводится список событий для большинства служб Office 365, которые подлежат аудиту.</span><span class="sxs-lookup"><span data-stu-id="4cdae-107">Also see the "Audited activities" section in [Search the audit log in the Security & Compliance Center](https://docs.microsoft.com/en-us/office365/securitycompliance/search-the-audit-log-in-security-and-compliance#audited-activities) for a list of events for most of the Office 365 services that are audited.</span></span>

#### <a name="how-do-i-onboard-to-the-management-activity-api"></a><span data-ttu-id="4cdae-108">Как подключиться к API действий управления?</span><span class="sxs-lookup"><span data-stu-id="4cdae-108">How do I onboard to the Management Activity API?</span></span>

<span data-ttu-id="4cdae-109">Сведения о том, как начать работу с API действий управления Office 365, см. в статье [Начало работы с API управления Office 365](get-started-with-office-365-management-apis.md).</span><span class="sxs-lookup"><span data-stu-id="4cdae-109">To get started with the Office 365 Management Activity API, see [Get started with Office 365 Management APIs](get-started-with-office-365-management-apis.md).</span></span>
 
#### <a name="what-is-the-throttling-limit-for-the--management-activity-api"></a><span data-ttu-id="4cdae-110">Каково ограничение на регулирование для API действий управления?</span><span class="sxs-lookup"><span data-stu-id="4cdae-110">What is the throttling limit for the  Management Activity API?</span></span>

<span data-ttu-id="4cdae-111">Текущее ограничение для регулирования составляет 60 000 запросов в минуту на идентификатор издателя.</span><span class="sxs-lookup"><span data-stu-id="4cdae-111">The current throttling limit is 60K requests/minute per Publisher ID.</span></span> 

#### <a name="we-want-to-programmatically-capture-all-events-in-all-workloads-what-is-the-most-reliable-way-to-do-this"></a><span data-ttu-id="4cdae-112">Мы хотим программным способом собирать данные обо всех событиях во всех рабочих нагрузках.</span><span class="sxs-lookup"><span data-stu-id="4cdae-112">We want to programmatically capture all events in all workloads.</span></span> <span data-ttu-id="4cdae-113">Как это лучше сделать?</span><span class="sxs-lookup"><span data-stu-id="4cdae-113">What is the most reliable way to do this?</span></span>

<span data-ttu-id="4cdae-114">Это можно сделать, используя API действий управления Office 365.</span><span class="sxs-lookup"><span data-stu-id="4cdae-114">You can do this by using the Office 365 Management Activity API.</span></span> <span data-ttu-id="4cdae-115">Рекомендуем также использовать **модель извлечения**, так как с веб-перехватчиками возникают проблемы.</span><span class="sxs-lookup"><span data-stu-id="4cdae-115">Also, we recommend that you use the **pull model** due to issues with using webhooks.</span></span> <span data-ttu-id="4cdae-116">Дополнительные сведения см. в разделе, посвященном использованию веб-перехватчиков, из статьи [Устранение неполадок, связанных с API действий управления Office 365](troubleshooting-the-office-365-management-activity-api.md#using-webhooks).</span><span class="sxs-lookup"><span data-stu-id="4cdae-116">For more information, see the "Using webhooks" section in [Troubleshooting the Office 365 Management Activity API](troubleshooting-the-office-365-management-activity-api.md#using-webhooks).</span></span>

#### <a name="is-it-true-that-mailbox-auditing-in-exchange-online-can-only-be-enabled-by-using-powershell"></a><span data-ttu-id="4cdae-117">Аудит почтовых ящиков в Exchange Online действительно можно включить только с помощью PowerShell?</span><span class="sxs-lookup"><span data-stu-id="4cdae-117">Is it true that mailbox auditing in Exchange Online can only be enabled by using PowerShell?</span></span>

<span data-ttu-id="4cdae-118">Так было раньше, но с января 2019 г. аудит почтовых ящиков включен по умолчанию для всех организаций, использующих Office 365.</span><span class="sxs-lookup"><span data-stu-id="4cdae-118">That used to be the case but since January 2019, mailbox auditing is now turned on by default for all Office 365 organizations.</span></span> <span data-ttu-id="4cdae-119">Дополнительные сведения см. в статье [Управление аудитом почтовых ящиков](https://docs.microsoft.com/office365/securitycompliance/enable-mailbox-auditing).</span><span class="sxs-lookup"><span data-stu-id="4cdae-119">For more information, see [Manage on-premises mailbox moves in Exchange 2016](https://docs.microsoft.com/office365/securitycompliance/enable-mailbox-auditing).</span></span>

#### <a name="are-there-any-differences-in-the-records-that-are-fetched-by-the-management-activity-api-versus-the-records-that-are-returned-by-using-the-audit-log-search-tool-in-the-office-365-security--compliance-center"></a><span data-ttu-id="4cdae-120">Есть ли разница между записями, которые получены API действий управления, и записями, которые возвращены средством поиска в журналах аудита, доступным в Центре безопасности и соответствия требованиям Office 365?</span><span class="sxs-lookup"><span data-stu-id="4cdae-120">Are there any differences in the records that are fetched by the Management Activity API versus the records that are returned by using the audit log search tool in the Office 365 Security & Compliance Center?</span></span>

<span data-ttu-id="4cdae-121">В обоих случаях возвращаются одни и те же данные.</span><span class="sxs-lookup"><span data-stu-id="4cdae-121">The data that is returned by both methods is the same.</span></span> <span data-ttu-id="4cdae-122">Фильтрация не выполняется.</span><span class="sxs-lookup"><span data-stu-id="4cdae-122">There is no filtering that happens.</span></span> <span data-ttu-id="4cdae-123">Единственное отличие заключается в том, что с помощью API за один подход можно получить данные за последние 7 дней.</span><span class="sxs-lookup"><span data-stu-id="4cdae-123">The only difference is that with the API, you can get data for the last 7 days at a time.</span></span> <span data-ttu-id="4cdae-124">При поиске в журнале аудита в Центре безопасности и соответствия требованиям (или при использовании соответствующего командлета [Search-UnifiedAuditLog](https://docs.microsoft.com/powershell/module/exchange/policy-and-compliance-audit/search-unifiedauditlog) в Exchange Online) можно получить данные за последние 90 дней.</span><span class="sxs-lookup"><span data-stu-id="4cdae-124">When searching the audit log in the Security & Compliance Center (or by using the corresponding [Search-UnifiedAuditLog](https://docs.microsoft.com/powershell/module/exchange/policy-and-compliance-audit/search-unifiedauditlog) cmdlet in Exchange Online), you can get data for the last 90 days.</span></span> 

#### <a name="what-happens-if-i-disable-auditing-for-my-office-365-organization-will-i-still-get-events-via-the-management-activity-api"></a><span data-ttu-id="4cdae-125">Что произойдет, если я отключу аудит для своей организации Office 365?</span><span class="sxs-lookup"><span data-stu-id="4cdae-125">What happens if I disable auditing for my Office 365 organization?</span></span> <span data-ttu-id="4cdae-126">Буду ли я по-прежнему получать события через API действий управления?</span><span class="sxs-lookup"><span data-stu-id="4cdae-126">Will I still get events via the Management Activity API?</span></span>

<span data-ttu-id="4cdae-127">Нет.</span><span class="sxs-lookup"><span data-stu-id="4cdae-127">No.</span></span> <span data-ttu-id="4cdae-128">Чтобы получать записи через API действий управления, необходимо включить единый аудит Office 365 для своей организации.</span><span class="sxs-lookup"><span data-stu-id="4cdae-128">Auditing must be enabled for your organization to pull records via the Management Activity API.</span></span> <span data-ttu-id="4cdae-129">Инструкции см. в статье [Включение и отключение поиска в журнале аудита Office 365](https://docs.microsoft.com/office365/securitycompliance/turn-audit-log-search-on-or-off).</span><span class="sxs-lookup"><span data-stu-id="4cdae-129">[Turn Office 365 audit log search on or off](https://docs.microsoft.com/office365/securitycompliance/turn-audit-log-search-on-or-off)</span></span>

#### <a name="arent-webhook-notifications-more-immediate-after-all-arent-they-event-driven"></a><span data-ttu-id="4cdae-130">Разве использование уведомлений веб-перехватчиков не предполагает более быстрое получение результатов?</span><span class="sxs-lookup"><span data-stu-id="4cdae-130">Aren’t webhook notifications more immediate?</span></span> <span data-ttu-id="4cdae-131">Они же создаются при появлении событий?</span><span class="sxs-lookup"><span data-stu-id="4cdae-131">After all, aren’t they event-driven?</span></span>

<span data-ttu-id="4cdae-132">Нет.</span><span class="sxs-lookup"><span data-stu-id="4cdae-132">No.</span></span> <span data-ttu-id="4cdae-133">Уведомления веб-перехватчиков не создаются автоматически сразу после появления событий.</span><span class="sxs-lookup"><span data-stu-id="4cdae-133">Webhook notifications aren't event-driven in the sense that the event triggers the notification.</span></span> <span data-ttu-id="4cdae-134">Нужно создать большой двоичный объект контента. Такое создание можно считать триггером доставки уведомлений.</span><span class="sxs-lookup"><span data-stu-id="4cdae-134">The content blob must still be created, and the creation of the content blob is what triggers the notification delivery.</span></span> <span data-ttu-id="4cdae-135">В последнее время период ожидания, предшествующий получению уведомлений, в случае использования веб-перехватчиков был дольше, чем в случае отправки API запросов непосредственно с помощью операции */content*.</span><span class="sxs-lookup"><span data-stu-id="4cdae-135">Recently, there have been longer wait times for notifications when using a webhook compared to querying the API directly with the */content* operation.</span></span> <span data-ttu-id="4cdae-136">API действий управления не стоит рассматривать как систему оповещений о событиях безопасности в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="4cdae-136">Therefore, the Management Activity API shouldn’t be thought of as a real-time security alert system.</span></span> <span data-ttu-id="4cdae-137">Корпорация Майкрософт предлагает другие продукты для этого.</span><span class="sxs-lookup"><span data-stu-id="4cdae-137">Microsoft has other products for that.</span></span> <span data-ttu-id="4cdae-138">В случае обеспечения безопасности уведомления о событиях, получаемые с помощью API действий управления, больше подходят для определения тенденций использования за длительные периоды.</span><span class="sxs-lookup"><span data-stu-id="4cdae-138">As far as security is concerned, Management Activity API event notifications can more appropriately be used to determine usage patterns over extended periods of time.</span></span>

#### <a name="when-pulling-the-data-from-the-management-activity-api-there-is-sometimes-a-delay-of-more-than-3-to-5-days-why-is-this"></a><span data-ttu-id="4cdae-139">При извлечении данных из API действий управления иногда происходит задержка, длящаяся дольше 3–5 дней.</span><span class="sxs-lookup"><span data-stu-id="4cdae-139">When pulling the data from the Management Activity API, there is sometimes a delay of more than 3 to 5 days.</span></span> <span data-ttu-id="4cdae-140">Почему это происходит?</span><span class="sxs-lookup"><span data-stu-id="4cdae-140">Why is this?</span></span>

<span data-ttu-id="4cdae-141">Иногда в службе Office 365 поваляются экземпляры временных сбоев или другие проблемы.</span><span class="sxs-lookup"><span data-stu-id="4cdae-141">At times, there are instances of a temporary outage or other issues in the Office 365 service.</span></span> <span data-ttu-id="4cdae-142">В этом случае некоторые записи аудита удаляются, и служба пытается выполнить их обратную засыпку.</span><span class="sxs-lookup"><span data-stu-id="4cdae-142">In those cases, some audit records are dropped and the service tries to backfill them.</span></span> <span data-ttu-id="4cdae-143">Хотя такое происходит только с 5–10 % записей, в некоторых ситуациях именно с этими записями может быть связана задержка.</span><span class="sxs-lookup"><span data-stu-id="4cdae-143">Although this happens for only about 5% to 10% of the records, these are the records that may be delayed in certain situations.</span></span> <span data-ttu-id="4cdae-144">Если такая задержка длится более 5 дней, ознакомьтесь с данными на панели мониторинга работоспособности служб в Центре администрирования Office 365.</span><span class="sxs-lookup"><span data-stu-id="4cdae-144">If the delay is more than 5 days, check the Service Health Dashboard in the Office 365 admin center.</span></span> <span data-ttu-id="4cdae-145">При необходимости также можно отправить запрос в [службу поддержки Майкрософт](https://support.office.com/article/contact-support-for-business-products-admin-help-32a17ca7-6fa0-4870-8a8d-e25ba4ccfd4b#ID0EAADAAA=online).</span><span class="sxs-lookup"><span data-stu-id="4cdae-145">If needed, you can also open a ticket with [Microsoft support](https://support.office.com/article/contact-support-for-business-products-admin-help-32a17ca7-6fa0-4870-8a8d-e25ba4ccfd4b#ID0EAADAAA=online).</span></span>

#### <a name="im-encountering-a-throttling-error-in-the-management-activity-api-what-should-i-do"></a><span data-ttu-id="4cdae-146">У меня возникла ошибка регулирования в API действий управления.</span><span class="sxs-lookup"><span data-stu-id="4cdae-146">I'm encountering a throttling error in the Management Activity API.</span></span> <span data-ttu-id="4cdae-147">Что делать?</span><span class="sxs-lookup"><span data-stu-id="4cdae-147">What should I do?</span></span>

<span data-ttu-id="4cdae-148">Отправьте запрос в [службу поддержки Майкрософт](https://support.office.com/article/contact-support-for-business-products-admin-help-32a17ca7-6fa0-4870-8a8d-e25ba4ccfd4b#ID0EAADAAA=online) на увеличение максимального значения для регулирования, указав для этого коммерческое обоснование.</span><span class="sxs-lookup"><span data-stu-id="4cdae-148">Open a ticket with [Microsoft Support](https://support.office.com/article/contact-support-for-business-products-admin-help-32a17ca7-6fa0-4870-8a8d-e25ba4ccfd4b#ID0EAADAAA=online) and request a new throttling limit, and include a business justification for increasing the limit.</span></span> <span data-ttu-id="4cdae-149">Мы проанализируем запрос и в случае положительного решения увеличим максимальное значение для регулирования.</span><span class="sxs-lookup"><span data-stu-id="4cdae-149">We will evaluate the request, and if accepted, we will increase the throttling limit.</span></span>

#### <a name="why-are-targetupdatedproperties-no-longer-in-extendedproperties-in-the-audit-logs-for-azure-active-directory-activities"></a><span data-ttu-id="4cdae-150">Почему TargetUpdatedProperties больше не находятся в свойстве ExtendedProperties в журналах аудита для действий Azure Active Directory?</span><span class="sxs-lookup"><span data-stu-id="4cdae-150">Why are TargetUpdatedProperties no longer in ExtendedProperties in the audit logs for Azure Active Directory activities?</span></span>

<span data-ttu-id="4cdae-151">TargetUpdatedProperties отображались в объекте ExtendedProperties.</span><span class="sxs-lookup"><span data-stu-id="4cdae-151">TargetUpdatedProperties were appearing in ExtendedProperties.</span></span> <span data-ttu-id="4cdae-152">Однако они были удалены из свойства ExtendedProperties и теперь отображаются в свойстве ModifiedProperties.</span><span class="sxs-lookup"><span data-stu-id="4cdae-152">However, they have been removed from ExtendedProperties and will now appear in ModifiedProperties.</span></span>
